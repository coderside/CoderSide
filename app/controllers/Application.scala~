package controllers

import play.api._
import play.api.mvc._
import play.api.libs.concurrent._
import play.api.libs.concurrent.execution.defaultContext
import akka.pattern.ask
import akka.util.Timeout
import akka.util.duration._
import actors.NodeSupervisor
import models.github.GitHubUser

object Application extends Controller {

  def index = Action {
    import NodeSupervisor.Query
    println("[Application] Sending query ...")
    implicit val timeout = Timeout(20 second)
    Async {
      (NodeSupervisor.ref ? Query(Set(GitHubUser()))).mapTo[String].asPromise.map { response =>
        Ok(response)
      }
    }
  }

  def search(keywords: List[String]) = Action {
    Ok
  }
}
